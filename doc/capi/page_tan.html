<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Steam Audio API: TrueAudio Next Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Steam Audio API
   &#160;<span id="projectnumber">2.0-beta.17</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">index</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">TrueAudio Next Support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tan_compute_device">Creating a Compute Device that supports TrueAudio Next</a></li>
<li class="level1"><a href="#tan_convolution">Using TrueAudio Next for convolution</a></li>
</ul>
</div>
<div class="textblock"><p>Steam Audio provides optional support for AMD TrueAudio Next, which allows you to reserve a portion of the GPU for accelerating convolution operations.</p>
<p>TrueAudio Next requires a supported AMD Radeon GPU.</p>
<p>If you choose to enable TrueAudio Next support via the Steam Audio API, then Steam Audio will try to use the GPU to accelerate the rendering of indirect sound, including real-time source-centric propagation, baked static source propagation, baked static listener propagation, real-time listener-centric reverb, and baked listener-centric reverb.</p>
<p>Enabling TrueAudio Next support via the Steam Audio API involves two main steps: creating an OpenCL compute device that supports TrueAudio Next, and specifying that TrueAudio Next should be used for convolution.</p>
<h1><a class="anchor" id="tan_compute_device"></a>
Creating a Compute Device that supports TrueAudio Next</h1>
<p>To create a Compute Device object, you must call the <a class="el" href="group__compute.html#ga43a32c4a8b04339456ad6c4f6a5bd2fb">iplCreateComputeDevice</a> function. Before calling this function, you must populate an <a class="el" href="struct_i_p_l_compute_device_filter.html">IPLComputeDeviceFilter</a> struct. The parameters should be set as follows:</p>
<ul>
<li><a class="el" href="struct_i_p_l_compute_device_filter.html#a8bc48a9676eea11c71b7cd9f76b6007a">type</a> Must be set to <a class="el" href="group__compute.html#gga71377539a09621fe3259cbfab80bbb55ab534f6d9d6962b2b2331e65d37fb9fa0">IPL_COMPUTEDEVICE_GPU</a>. TrueAudio Next currently supports GPU acceleration only.</li>
<li><a class="el" href="struct_i_p_l_compute_device_filter.html#a1b511297b000f7cbfd0d6ef92e363ac9">maxCUsToReserve</a> This is the maximum number of GPU Compute Units (CUs) that will be reserved for audio processing and IR update combined.</li>
<li><a class="el" href="struct_i_p_l_compute_device_filter.html#ae8daf3f73c5f1e6d0437f14e6cb35f3d">fractionCUsForIRUpdate</a> This is the fraction of maximum reserved CUs that should be used for impulse response (IR) update. The IR update includes any calculation performed by Radeon Rays to calculate IR and/or pre-transformation of the IR for convolution with input audio.</li>
</ul>
<p>See <a class="el" href="page_radeonrays.html">Radeon Rays Support</a> for details on Radeon Rays Support.</p>
<p>If TrueAudio Next initialization fails for any reason, your application can either try again with different values for <code>maxCUsToReserve</code> and <code>fractionCUsForIRUpdate</code>, or fall back to Steam Audio's built-in CPU-based convolution.</p>
<p>The Compute Device object created in this step must be passed to all Steam Audio API functions that require a computeDevice parameter.</p>
<h1><a class="anchor" id="tan_convolution"></a>
Using TrueAudio Next for convolution</h1>
<p>To configure Steam Audio to use TrueAudio Next for convolution, you must then create an <a class="el" href="struct_i_p_l_rendering_settings.html">IPLRenderingSettings</a> struct, with its <a class="el" href="struct_i_p_l_rendering_settings.html#a5047ce8293d0f53d57dc3cebedeebfa0">convolutionType</a> parameter set to <a class="el" href="group__rendersettings.html#gga39204273f15f7ed305e8cb90614f774ea07b6da111fda213e12cad485ab61c934">IPL_CONVOLUTIONTYPE_TRUEAUDIONEXT</a>. This <a class="el" href="struct_i_p_l_rendering_settings.html">IPLRenderingSettings</a> struct must be passed to the <a class="el" href="group__envrenderer.html#gaf39736c9b9d6bf5ed191fc667a8251aa">iplCreateEnvironmentalRenderer</a> function. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
